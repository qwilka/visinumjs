<!doctype html>
<html>
    <head>
    	<title>TESTING vntree.js</title>
		<link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
		<link rel="stylesheet" href="/libs/jstree.css">
		<script src="/libs/jstree.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/uuid@latest/dist/umd/uuidv4.min.js"></script>

	</head>
    <body>
		<div id="datatree"></div>
        <script src="vntree.js"></script>
        <script type="module">
			let rootnode = new VnNode("root node");
			let node1 = new VnNode("node1 level1", rootnode);
			let node11 = new VnNode("node11 level2", node1);
			let node12 = new VnNode("node12 level2", node1);
			let node13 = new VnNode("node13 level2", node1);
			let node121 = new VnNode("node121 level3", node12);
			let node122 = new VnNode("node122 level3", node12);
			let node2 = new VnNode("node2 (level1)", rootnode);
			let node21 = new VnNode("node21 (level2)", node2);
			let node211 = new VnNode("node211 (level3)", node21);
			let node212 = new VnNode("node212 (level3) parentless");
			node21.add_child(node212);
			node21.add_child(new VnNode("node213 (level3) parentless"));
			let node3 = new VnNode("node3 (level1)", rootnode);

            //debugger;
			
			console.log(rootnode.to_texttree());
			//for (let n of rootnode) console.log(n.name);
            let treeDict = rootnode._to_treedict();
            debugger;

			


const attachDatatree = (treeData=null) => {
  var c = 0;
  function dummy(levels, nodes) {
    var data = [], i;
    for (i = 0; i < nodes; i++) {
        c ++;
        data.push({
            'id' : levels + '_' + i,
            'text' : 'node ' + i + ' ' + (i === 1 ? 'lipsum lipsum lipsum lipsum lipsum lipsum lipsum lipsum ' : ''),
            'children' : levels > 1 ? dummy(levels - 1, nodes) : []
        });
    }
    return data;
  }  
  var instance = new jsTree({}, document.getElementById('datatree'));
  instance
      .empty()
      .create(dummy(2, 10))
      .openAll();
  console.log(c);
  let tree = instance.tree;   // 
  let root = instance.tree.root;
  //testnode = instance.select({"id":"2_0"});
  //testnode = instance.tree.find({id:"2_0"});
  let testnode = tree.find("1_2")[0];
  testnode.data.text = testnode.data.text + "_testnode";
  console.log(testnode);
  instance.create({id:"a1", text:"new test node"}, testnode);
  instance.select(testnode);
  instance.redraw();
  instance.openAll();

}

attachDatatree();


// let pnode = PNode("root node");
// let pnode1 = PNode("node1 level1", pnode);
// let pnode2 = PNode("node1 level2", pnode);
// let pnode11 = PNode("node1 level11", pnode1);
// let pnode12 = PNode("node1 level12", pnode1);
// console.log(pnode);
// console.log(pnode.toTextTree());
// for (let n of pnode) console.log(n.name);

</script>
    </body>
</html>
